{"ast":null,"code":"import _slicedToArray from\"E:/Downloads/Project-master/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import ClassSelect from\"./mini_components/ClassSelect\";import SubjectSelect from\"./mini_components/SubjectSelect\";import MarkTable from\"./mini_components/MarksTable\";import axios from\"axios\";import Header from\"../Header/Header\";import Footer from\"../Footer/Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Marks=function Marks(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),school_class=_useState2[0],setSchool_Class=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),subject=_useState4[0],setSubject=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),visibleSubjects=_useState6[0],setVisibleSubjects=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),visibleTable=_useState8[0],setVisibleTabel=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var getAll=function getAll(){if(school_class>0){axios.get(\"http://127.0.0.1:8000/eduschedule/api/v1/students/\".concat(school_class,\"/\")).then(function(responce){setData(responce.data);}).catch(function(err){return console.log(err);});}};var changeMark=function changeMark(newMark){axios.put(\"http://127.0.0.1:8000/eduschedule/api/v1/marks/\".concat(newMark.id,\"/\"),newMark).then(function(){return getAll();});};var addNew=function addNew(student){console.log(student);axios.post(\"http://127.0.0.1:8000/eduschedule/api/v1/marks/\".concat(student.id,\"/create\"),{value:student.value,subject:student.subject}).then(function(){return getAll();}).catch(function(err){return console.log(err);});};var changeClass=function changeClass(value){if(value>0){setSchool_Class(value);setVisibleSubjects(true);}else{setVisibleSubjects(false);setVisibleTabel(false);}};var changeSubject=function changeSubject(value){if(value){setSubject(value);setVisibleTabel(true);}else{setVisibleTabel(false);}};useEffect(function(){getAll();},[school_class]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(ClassSelect,{changeClass:changeClass}),visibleSubjects?/*#__PURE__*/_jsx(SubjectSelect,{changeSubject:changeSubject}):/*#__PURE__*/_jsx(\"p\",{}),visibleSubjects&&visibleTable?/*#__PURE__*/_jsx(MarkTable,{students:data,subject:subject,change:changeMark,addNew:addNew}):/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(Footer,{})]});};export default Marks;","map":{"version":3,"names":["useEffect","useState","ClassSelect","SubjectSelect","MarkTable","axios","Header","Footer","jsx","_jsx","jsxs","_jsxs","Marks","_useState","_useState2","_slicedToArray","school_class","setSchool_Class","_useState3","_useState4","subject","setSubject","_useState5","_useState6","visibleSubjects","setVisibleSubjects","_useState7","_useState8","visibleTable","setVisibleTabel","_useState9","_useState10","data","setData","getAll","get","concat","then","responce","catch","err","console","log","changeMark","newMark","put","id","addNew","student","post","value","changeClass","changeSubject","children","students","change"],"sources":["E:/Downloads/Project-master/Project-master/MarkingSystem/frontend/src/components/Marks/marks.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport ClassSelect from \"./mini_components/ClassSelect\"\r\nimport SubjectSelect from \"./mini_components/SubjectSelect\"\r\nimport MarkTable from \"./mini_components/MarksTable\"\r\nimport axios from \"axios\"\r\nimport Header from \"../Header/Header\"\r\nimport Footer from \"../Footer/Footer\"\r\n\r\n\r\nconst Marks = () =>\r\n{\r\n    const [school_class, setSchool_Class] = useState('')\r\n    const [subject, setSubject] = useState('')\r\n    const [visibleSubjects, setVisibleSubjects] = useState(false)\r\n    const [visibleTable, setVisibleTabel] = useState(false)\r\n    const [data, setData] = useState([])\r\n\r\n    const getAll = () =>\r\n    {\r\n        if(school_class > 0)\r\n        {\r\n            axios.get(`http://127.0.0.1:8000/eduschedule/api/v1/students/${school_class}/`)\r\n            .then(responce => {\r\n                setData(responce.data)\r\n            })\r\n            .catch(err => console.log(err))\r\n        }\r\n       \r\n    }\r\n\r\n    const changeMark = (newMark) =>\r\n    {     \r\n        axios.put(`http://127.0.0.1:8000/eduschedule/api/v1/marks/${newMark.id}/`, newMark)\r\n        .then(() => getAll())\r\n    }\r\n    const addNew = (student) =>\r\n    {\r\n        console.log(student)\r\n        axios.post(`http://127.0.0.1:8000/eduschedule/api/v1/marks/${student.id}/create`, {value: student.value, subject: student.subject})\r\n        .then(() => getAll())\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    const changeClass = (value) =>\r\n    {  \r\n        if(value > 0)\r\n        {\r\n            setSchool_Class(value)\r\n            setVisibleSubjects(true)\r\n        }\r\n        else\r\n        {\r\n            setVisibleSubjects(false)\r\n            setVisibleTabel(false)\r\n        }\r\n    }\r\n    \r\n    const changeSubject = (value) =>\r\n    {\r\n        if(value)\r\n        {\r\n            setSubject(value)\r\n            setVisibleTabel(true)\r\n        }\r\n        else\r\n        {   \r\n            setVisibleTabel(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() =>{\r\n        getAll()\r\n    }, [school_class])\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <ClassSelect changeClass={changeClass}/>\r\n            {visibleSubjects\r\n            ? <SubjectSelect changeSubject={changeSubject}/>\r\n            : <p></p>\r\n            }\r\n            {visibleSubjects && visibleTable\r\n            ? <MarkTable students={data} subject={subject} change={changeMark} addNew={addNew}/>\r\n            : <p/>\r\n            }\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Marks;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}