{"ast":null,"code":"import _regeneratorRuntime from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from\"axios\";var EventsService=/*#__PURE__*/function(){function EventsService(){_classCallCheck(this,EventsService);}_createClass(EventsService,null,[{key:\"getAll\",value:function(){var _getAll=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this=this;var responce;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('ACCESS'))}}).catch(function(error){if(localStorage.getItem('REFRESH')&&error.response.status===401){axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/',{refresh:localStorage.getItem('REFRESH')}).then(function(responce){localStorage.setItem('ACCESS',responce.data.access);_this.getAll();});}});case 2:responce=_context.sent;return _context.abrupt(\"return\",responce.data);case 4:case\"end\":return _context.stop();}},_callee);}));function getAll(){return _getAll.apply(this,arguments);}return getAll;}()},{key:\"addNewEvent\",value:function(){var _addNewEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newEvent){var _this2=this;var responce;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/\",newEvent,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('ACCESS'))}}).catch(function(error){if(localStorage.getItem('REFRESH')&&error.response.status===401){axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/',{refresh:localStorage.getItem('REFRESH')}).then(function(responce){localStorage.setItem('ACCESS',responce.data.access);_this2.addNewEvent(newEvent);});}});case 2:responce=_context2.sent;return _context2.abrupt(\"return\",responce.statusText);case 4:case\"end\":return _context2.stop();}},_callee2);}));function addNewEvent(_x){return _addNewEvent.apply(this,arguments);}return addNewEvent;}()},{key:\"deleteEvent\",value:function(){var _deleteEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){var _this3=this;var responce;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(\"http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/\".concat(event.id,\"/\"),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('ACCESS'))}}).catch(function(error){if(localStorage.getItem('REFRESH')&&error.response.status===401){axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/',{refresh:localStorage.getItem('REFRESH')}).then(function(responce){localStorage.setItem('ACCESS',responce.data.access);_this3.deleteEvent(event);});}});case 2:responce=_context3.sent;return _context3.abrupt(\"return\",responce.statusText);case 4:case\"end\":return _context3.stop();}},_callee3);}));function deleteEvent(_x2){return _deleteEvent.apply(this,arguments);}return deleteEvent;}()},{key:\"changeEvent\",value:function(){var _changeEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event){var _this4=this;var responce;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.put(\"http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/\".concat(event.id,\"/\"),event,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('ACCESS'))}}).catch(function(error){if(localStorage.getItem('REFRESH')&&error.response.status===401){axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/',{refresh:localStorage.getItem('REFRESH')}).then(function(responce){localStorage.setItem('ACCESS',responce.data.access);_this4.changeEvent(event);});}});case 2:responce=_context4.sent;return _context4.abrupt(\"return\",responce.statusText);case 4:case\"end\":return _context4.stop();}},_callee4);}));function changeEvent(_x3){return _changeEvent.apply(this,arguments);}return changeEvent;}()}]);return EventsService;}();export{EventsService as default};","map":{"version":3,"names":["axios","EventsService","_classCallCheck","_createClass","key","value","_getAll","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this","responce","wrap","_callee$","_context","prev","next","get","headers","Authorization","concat","localStorage","getItem","catch","error","response","status","post","refresh","then","setItem","data","access","getAll","sent","abrupt","stop","apply","arguments","_addNewEvent","_callee2","newEvent","_this2","_callee2$","_context2","addNewEvent","statusText","_x","_deleteEvent","_callee3","event","_this3","_callee3$","_context3","delete","id","deleteEvent","_x2","_changeEvent","_callee4","_this4","_callee4$","_context4","put","changeEvent","_x3","default"],"sources":["E:/Downloads/ะะท/Project-master/MarkingSystem/frontend/src/components/services/EventsService.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport default class EventsService \r\n{\r\n    static async getAll()\r\n    {\r\n        const responce = await axios.get(\"http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/\",\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(error =>\r\n        {\r\n            if(localStorage.getItem('REFRESH') && error.response.status === 401)\r\n            {\r\n                axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.getAll()\r\n                })\r\n            }\r\n        })\r\n        return responce.data\r\n    }\r\n\r\n    static async addNewEvent(newEvent)\r\n    {\r\n        const responce = await axios.post(\"http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/\", newEvent,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(error =>\r\n        {\r\n            if(localStorage.getItem('REFRESH') && error.response.status === 401)\r\n            {\r\n                axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.addNewEvent(newEvent)\r\n                })\r\n            }\r\n        })\r\n        return responce.statusText\r\n    }\r\n\r\n    static async deleteEvent(event)\r\n    {\r\n        const responce = await axios.delete(`http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/${event.id}/`,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(error =>\r\n        {\r\n            if(localStorage.getItem('REFRESH') && error.response.status === 401)\r\n            {\r\n                axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.deleteEvent(event)\r\n                })\r\n            }\r\n        })\r\n        return responce.statusText\r\n    }\r\n\r\n    static async changeEvent(event)\r\n    {\r\n        const responce = await axios.put(`http://maximzhak43.pythonanywhere.com/eduschedule/api/v1/events/${event.id}/`, event,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(error=>\r\n        {\r\n            if(localStorage.getItem('REFRESH') && error.response.status === 401)\r\n            {\r\n                axios.post('http://maximzhak43.pythonanywhere.com/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.changeEvent(event)\r\n                })\r\n            }\r\n        })\r\n        return responce.statusText\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}