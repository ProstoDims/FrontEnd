{"ast":null,"code":"import axios from \"axios\";\nexport default class EventsService {\n  static async getAll() {\n    const responce = await axios.get(\"http://127.0.0.1:8000/eduschedule/api/v1/events/\", {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('ACCESS')}`\n      }\n    }).catch(error => {\n      console.log(error.response.status);\n      if (localStorage.getItem('REFRESH') && error.response.status === 401) {\n        axios.post('http://127.0.0.1:8000/token/refresh/', {\n          refresh: localStorage.getItem('REFRESH')\n        }).then(responce => {\n          localStorage.setItem('ACCESS', responce.data.access);\n          this.getAll();\n        });\n      }\n    });\n    return responce.data;\n  }\n  static async addNewEvent(newEvent) {\n    const responce = await axios.post(\"http://127.0.0.1:8000/eduschedule/api/v1/events/\", newEvent, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('ACCESS')}`\n      }\n    }).catch(() => {\n      if (localStorage.getItem('REFRESH')) {\n        axios.post('http://127.0.0.1:8000/token/refresh/', {\n          refresh: localStorage.getItem('REFRESH')\n        }).then(responce => {\n          localStorage.setItem('ACCESS', responce.data.access);\n          this.addNewEvent(newEvent);\n        });\n      }\n    });\n    return responce.statusText;\n  }\n  static async deleteEvent(event) {\n    const responce = await axios.delete(`http://127.0.0.1:8000/eduschedule/api/v1/events/${event.id}/`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('ACCESS')}`\n      }\n    }).catch(() => {\n      if (localStorage.getItem('REFRESH')) {\n        axios.post('http://127.0.0.1:8000/token/refresh/', {\n          refresh: localStorage.getItem('REFRESH')\n        }).then(responce => {\n          localStorage.setItem('ACCESS', responce.data.access);\n          this.deleteEvent(event);\n        });\n      }\n    });\n    return responce.statusText;\n  }\n  static async changeEvent(event) {\n    const responce = await axios.put(`http://127.0.0.1:8000/eduschedule/api/v1/events/${event.id}/`, event, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('ACCESS')}`\n      }\n    }).catch(error => {\n      console.log(error.status);\n      //if(localStorage.getItem('REFRESH'))\n      //{\n      //axios.post('http://127.0.0.1:8000/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\n      //.then(responce => {\n      //localStorage.setItem('ACCESS', responce.data.access)\n      //this.changeEvent(event)\n      //})\n      //}\n    });\n\n    return responce.statusText;\n  }\n}","map":{"version":3,"names":["axios","EventsService","getAll","responce","get","headers","Authorization","localStorage","getItem","catch","error","console","log","response","status","post","refresh","then","setItem","data","access","addNewEvent","newEvent","statusText","deleteEvent","event","delete","id","changeEvent","put"],"sources":["E:/Downloads/ะะท/Project-master/MarkingSystem/frontend/src/components/services/EventsService.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport default class EventsService \r\n{\r\n    static async getAll()\r\n    {\r\n        const responce = await axios.get(\"http://127.0.0.1:8000/eduschedule/api/v1/events/\",\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(error =>\r\n        {\r\n            console.log(error.response.status)\r\n            if(localStorage.getItem('REFRESH') && error.response.status === 401)\r\n            {\r\n                axios.post('http://127.0.0.1:8000/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.getAll()\r\n                })\r\n            }\r\n        })\r\n        return responce.data\r\n    }\r\n\r\n    static async addNewEvent(newEvent)\r\n    {\r\n        const responce = await axios.post(\"http://127.0.0.1:8000/eduschedule/api/v1/events/\", newEvent,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(() =>\r\n        {\r\n            if(localStorage.getItem('REFRESH'))\r\n            {\r\n                axios.post('http://127.0.0.1:8000/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.addNewEvent(newEvent)\r\n                })\r\n            }\r\n        })\r\n        return responce.statusText\r\n    }\r\n\r\n    static async deleteEvent(event)\r\n    {\r\n        const responce = await axios.delete(`http://127.0.0.1:8000/eduschedule/api/v1/events/${event.id}/`,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(() =>\r\n        {\r\n            if(localStorage.getItem('REFRESH'))\r\n            {\r\n                axios.post('http://127.0.0.1:8000/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.data.access)\r\n                    this.deleteEvent(event)\r\n                })\r\n            }\r\n        })\r\n        return responce.statusText\r\n    }\r\n\r\n    static async changeEvent(event)\r\n    {\r\n        const responce = await axios.put(`http://127.0.0.1:8000/eduschedule/api/v1/events/${event.id}/`, event,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .catch(error=>\r\n        {\r\n            console.log(error.status)\r\n            //if(localStorage.getItem('REFRESH'))\r\n            //{\r\n                //axios.post('http://127.0.0.1:8000/token/refresh/', {refresh: localStorage.getItem('REFRESH')})\r\n                //.then(responce => {\r\n                    //localStorage.setItem('ACCESS', responce.data.access)\r\n                    //this.changeEvent(event)\r\n                //})\r\n            //}\r\n        })\r\n        return responce.statusText\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}