{"ast":null,"code":"import _regeneratorRuntime from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/Downloads/\\u0414\\u0437/Project-master/MarkingSystem/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import EventList from\"./mini_components/EventList\";import ModalWidnow from\"./mini_components/ModalWindow\";import AddNewForm from\"./mini_components/AddNewForm\";import EventsService from\"../services/EventsService\";import Loader from\"../UI/MyLoader/Loader\";import Header from\"../Header/Header\";import classes from\"./styles.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Events=function Events(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEventsLoading=_useState6[0],setIsEventsLoading=_useState6[1];useEffect(function(){getEvents();},[]);function getEvents(){return _getEvents.apply(this,arguments);}function _getEvents(){_getEvents=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var events;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsEventsLoading(true);_context.next=3;return EventsService.getAll();case 3:events=_context.sent;setEvents(events);setIsEventsLoading(false);case 6:case\"end\":return _context.stop();}},_callee);}));return _getEvents.apply(this,arguments);}function createEvent(_x){return _createEvent.apply(this,arguments);}function _createEvent(){_createEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newEvent){var request;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return EventsService.addNewEvent(newEvent);case 2:request=_context2.sent;if(request==='Created'){setModal(false);getEvents();}case 4:case\"end\":return _context2.stop();}},_callee2);}));return _createEvent.apply(this,arguments);}function removeEvent(_x2){return _removeEvent.apply(this,arguments);}function _removeEvent(){_removeEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){var request;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return EventsService.deleteEvent(event);case 2:request=_context3.sent;if(request==='No Content'){getEvents();}case 4:case\"end\":return _context3.stop();}},_callee3);}));return _removeEvent.apply(this,arguments);}function changeEvent(_x3){return _changeEvent.apply(this,arguments);}function _changeEvent(){_changeEvent=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event){var request;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return EventsService.changeEvent(event);case 2:request=_context4.sent;if(request==='OK'){getEvents();}case 4:case\"end\":return _context4.stop();}},_callee4);}));return _changeEvent.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),localStorage.getItem('ROLE')==='admin'?/*#__PURE__*/_jsx(\"div\",{children:!isEventsLoading?/*#__PURE__*/_jsx(\"button\",{className:classes.buttonAdd,onClick:function onClick(){return setModal(true);},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u0435\"}):/*#__PURE__*/_jsx(\"p\",{})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(ModalWidnow,{visible:modal,setVisible:setModal,children:/*#__PURE__*/_jsx(AddNewForm,{create:createEvent})}),isEventsLoading?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginTop:50},children:/*#__PURE__*/_jsx(Loader,{})}):/*#__PURE__*/_jsx(EventList,{change:changeEvent,events:events,remove:removeEvent})]});};export default Events;","map":{"version":3,"names":["useEffect","useState","EventList","ModalWidnow","AddNewForm","EventsService","Loader","Header","classes","jsx","_jsx","jsxs","_jsxs","Events","_useState","_useState2","_slicedToArray","events","setEvents","_useState3","_useState4","modal","setModal","_useState5","_useState6","isEventsLoading","setIsEventsLoading","getEvents","_getEvents","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","getAll","sent","stop","createEvent","_x","_createEvent","_callee2","newEvent","request","_callee2$","_context2","addNewEvent","removeEvent","_x2","_removeEvent","_callee3","event","_callee3$","_context3","deleteEvent","changeEvent","_x3","_changeEvent","_callee4","_callee4$","_context4","children","localStorage","getItem","className","buttonAdd","onClick","visible","setVisible","create","style","display","justifyContent","marginTop","change","remove"],"sources":["E:/Downloads/Дз/Project-master/MarkingSystem/frontend/src/components/Events/Events.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport EventList from \"./mini_components/EventList\"\r\nimport ModalWidnow from \"./mini_components/ModalWindow\";\r\nimport AddNewForm from \"./mini_components/AddNewForm\";\r\nimport EventsService from \"../services/EventsService\";\r\nimport Loader from \"../UI/MyLoader/Loader\";\r\nimport Header from \"../Header/Header\"\r\nimport classes from \"./styles.module.css\"\r\n\r\nconst Events = () =>\r\n{\r\n    const [events, setEvents] = useState([])\r\n    const [modal, setModal] = useState(false)\r\n    const [isEventsLoading, setIsEventsLoading] = useState(false)\r\n\r\n\r\n    useEffect(() => {\r\n        getEvents()\r\n    },[])\r\n\r\n    async function getEvents()\r\n    {\r\n        setIsEventsLoading(true)\r\n        const events = await EventsService.getAll()\r\n        setEvents(events)\r\n        setIsEventsLoading(false)\r\n    }\r\n    async function createEvent(newEvent)\r\n    {\r\n        const request = await EventsService.addNewEvent(newEvent)\r\n        if(request === 'Created')\r\n        {\r\n            setModal(false)\r\n            getEvents() \r\n        }\r\n        \r\n    }\r\n    async function removeEvent(event)\r\n    {\r\n        const request = await EventsService.deleteEvent(event)\r\n        if(request === 'No Content')\r\n        {\r\n            getEvents()\r\n        }\r\n               \r\n    }\r\n\r\n    async function changeEvent(event)\r\n    {\r\n        const request = await EventsService.changeEvent(event)\r\n        if(request === 'OK')\r\n        {\r\n            getEvents()\r\n        }  \r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Header />       \r\n            \r\n            {localStorage.getItem('ROLE') === 'admin'\r\n            ? <div>\r\n                {!isEventsLoading\r\n                ? <button className={classes.buttonAdd} onClick = {() => setModal(true)}>Добавить событие</button>\r\n                : <p/>\r\n                }\r\n               </div> \r\n            :<div/>\r\n            }\r\n              \r\n\r\n            <ModalWidnow visible={modal} setVisible={setModal}>\r\n                <AddNewForm create={createEvent}></AddNewForm>\r\n            </ModalWidnow>\r\n            \r\n            {isEventsLoading\r\n            ? <div style={{display: 'flex', justifyContent: 'center', marginTop: 50}}><Loader/></div>\r\n            : <EventList change = {changeEvent} events = {events} remove = {removeEvent} ></EventList>\r\n            } \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Events;  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}