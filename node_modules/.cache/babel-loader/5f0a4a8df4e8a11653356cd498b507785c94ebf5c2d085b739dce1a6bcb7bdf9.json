{"ast":null,"code":"var _jsxFileName = \"E:\\\\Downloads\\\\\\u0414\\u0437\\\\Project-master\\\\MarkingSystem\\\\frontend\\\\src\\\\components\\\\Marks\\\\marks.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport ClassSelect from \"./mini_components/ClassSelect\";\nimport SubjectSelect from \"./mini_components/SubjectSelect\";\nimport MarkTable from \"./mini_components/MarksTable\";\nimport axios from \"axios\";\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Marks = () => {\n  _s();\n  const [school_class, setSchool_Class] = useState('');\n  const [subject, setSubject] = useState('');\n  const [visibleSubjects, setVisibleSubjects] = useState(false);\n  const [visibleTable, setVisibleTabel] = useState(false);\n  const [data, setData] = useState([]);\n  const getAll = () => {\n    if (school_class > 0) {\n      axios.get(`http://127.0.0.1:8000/eduschedule/api/v1/students/${school_class}/`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('ACCESS')}`\n        }\n      }).then(responce => {\n        setData(responce.data);\n      }).catch(() => {\n        if (localStorage.getItem('REFRESH')) {\n          axios.post('http://127.0.0.1:8000/token/refresh/', localStorage.getItem('REFRESH')).then(responce => {\n            localStorage.setItem('ACCESS', responce.access);\n          });\n        }\n      });\n    }\n  };\n  const changeMark = newMark => {\n    axios.put(`http://127.0.0.1:8000/eduschedule/api/v1/marks/${newMark.id}/`, newMark, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('ACCESS')}`\n      }\n    }).then(responce => {\n      setData(responce.data);\n    }).catch(() => {\n      if (localStorage.getItem('REFRESH')) {\n        axios.post('http://127.0.0.1:8000/token/refresh/', localStorage.getItem('REFRESH')).then(responce => {\n          localStorage.setItem('ACCESS', responce.access);\n        });\n      }\n    });\n  };\n  const addNew = student => {\n    axios.post(`http://127.0.0.1:8000/eduschedule/api/v1/marks/${student.id}/create`, student).then(() => getAll()).catch(err => console.log(err));\n  };\n  const changeClass = value => {\n    if (value > 0) {\n      setSchool_Class(value);\n      setVisibleSubjects(true);\n    } else {\n      setVisibleSubjects(false);\n      setVisibleTabel(false);\n    }\n  };\n  const changeSubject = value => {\n    if (value) {\n      setSubject(value);\n      setVisibleTabel(true);\n    } else {\n      setVisibleTabel(false);\n    }\n  };\n  useEffect(() => {\n    getAll();\n  }, [school_class]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ClassSelect, {\n      changeClass: changeClass\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), visibleSubjects ? /*#__PURE__*/_jsxDEV(SubjectSelect, {\n      changeSubject: changeSubject\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }, this), visibleSubjects && visibleTable ? /*#__PURE__*/_jsxDEV(MarkTable, {\n      students: data,\n      subject: subject,\n      change: changeMark,\n      addNew: addNew\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n};\n_s(Marks, \"MDrJv2I9wqxlvAI+mWzuxXxkG2Q=\");\n_c = Marks;\nexport default Marks;\nvar _c;\n$RefreshReg$(_c, \"Marks\");","map":{"version":3,"names":["useEffect","useState","ClassSelect","SubjectSelect","MarkTable","axios","Header","Footer","jsxDEV","_jsxDEV","Marks","_s","school_class","setSchool_Class","subject","setSubject","visibleSubjects","setVisibleSubjects","visibleTable","setVisibleTabel","data","setData","getAll","get","headers","Authorization","localStorage","getItem","then","responce","catch","post","setItem","access","changeMark","newMark","put","id","addNew","student","err","console","log","changeClass","value","changeSubject","children","fileName","_jsxFileName","lineNumber","columnNumber","students","change","_c","$RefreshReg$"],"sources":["E:/Downloads/ะะท/Project-master/MarkingSystem/frontend/src/components/Marks/marks.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport ClassSelect from \"./mini_components/ClassSelect\"\r\nimport SubjectSelect from \"./mini_components/SubjectSelect\"\r\nimport MarkTable from \"./mini_components/MarksTable\"\r\nimport axios from \"axios\"\r\nimport Header from \"../Header/Header\"\r\nimport Footer from \"../Footer/Footer\"\r\n\r\n\r\nconst Marks = () =>\r\n{\r\n    const [school_class, setSchool_Class] = useState('')\r\n    const [subject, setSubject] = useState('')\r\n    const [visibleSubjects, setVisibleSubjects] = useState(false)\r\n    const [visibleTable, setVisibleTabel] = useState(false)\r\n    const [data, setData] = useState([])\r\n\r\n    const getAll = () =>\r\n    {\r\n        if(school_class > 0)\r\n        {\r\n            axios.get(`http://127.0.0.1:8000/eduschedule/api/v1/students/${school_class}/`,\r\n            {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n            .then(responce => {\r\n                setData(responce.data)\r\n            })\r\n            .catch(()=>\r\n            {\r\n                if(localStorage.getItem('REFRESH'))\r\n                {\r\n                    axios.post('http://127.0.0.1:8000/token/refresh/', localStorage.getItem('REFRESH'))\r\n                    .then(responce => {\r\n                        localStorage.setItem('ACCESS', responce.access)\r\n                    })\r\n                }\r\n            })\r\n        }\r\n       \r\n    }\r\n\r\n    const changeMark = (newMark) =>\r\n    {     \r\n        axios.put(`http://127.0.0.1:8000/eduschedule/api/v1/marks/${newMark.id}/`, newMark,\r\n        {headers: {Authorization: `Bearer ${localStorage.getItem('ACCESS')}`}})\r\n        .then(responce => \r\n        {\r\n           setData(responce.data)\r\n        })\r\n        .catch(()=>\r\n        {\r\n            if(localStorage.getItem('REFRESH'))\r\n            {\r\n                axios.post('http://127.0.0.1:8000/token/refresh/', localStorage.getItem('REFRESH'))\r\n                .then(responce => {\r\n                    localStorage.setItem('ACCESS', responce.access)\r\n                })\r\n            }\r\n        })\r\n    }\r\n    const addNew = (student) =>\r\n    {\r\n        axios.post(`http://127.0.0.1:8000/eduschedule/api/v1/marks/${student.id}/create`, student)\r\n        .then(() => getAll())\r\n        .catch(err => console.log(err))\r\n    }\r\n\r\n    const changeClass = (value) =>\r\n    {  \r\n        if(value > 0)\r\n        {\r\n            setSchool_Class(value)\r\n            setVisibleSubjects(true)\r\n        }\r\n        else\r\n        {\r\n            setVisibleSubjects(false)\r\n            setVisibleTabel(false)\r\n        }\r\n    }\r\n    \r\n    const changeSubject = (value) =>\r\n    {\r\n        if(value)\r\n        {\r\n            setSubject(value)\r\n            setVisibleTabel(true)\r\n        }\r\n        else\r\n        {   \r\n            setVisibleTabel(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() =>{\r\n        getAll()\r\n    }, [school_class])\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <ClassSelect changeClass={changeClass}/>\r\n            {visibleSubjects\r\n            ? <SubjectSelect changeSubject={changeSubject}/>\r\n            : <p></p>\r\n            }\r\n            {visibleSubjects && visibleTable\r\n            ? <MarkTable students={data} subject={subject} change={changeMark} addNew={addNew}/>\r\n            : <p/>\r\n            }\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Marks;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}